<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VK Project | Premium Access</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Montserrat:wght@300;500;600&display=swap');

        :root {
            --bg-deep: #0a0b10;
            --panel-bg: #14161f;
            --accent-gold: #c5a059;
            --text-main: #e2e8f0;
            --text-dim: #94a3b8;
            --border-glow: rgba(197, 160, 89, 0.2);
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            font-family: 'Montserrat', sans-serif;
            background-color: var(--bg-deep);
            color: var(--text-main); overflow-x: hidden;
        }

        /* AMBIENT BACKGROUND */
        .ambient-light {
            position: fixed; top: -10%; left: -10%; width: 40%; height: 40%;
            background: radial-gradient(circle, rgba(197, 160, 89, 0.05) 0%, transparent 70%);
            z-index: -1; pointer-events: none;
        }

        /* AUTH SCREEN */
        #auth-screen { display: flex; align-items: center; justify-content: center; height: 100vh; }
        .auth-box {
            width: 360px; padding: 60px 40px; text-align: center;
            background: var(--panel-bg); border-radius: 20px;
            border: 1px solid var(--border-glow);
            box-shadow: 0 30px 60px rgba(0,0,0,0.6);
            animation: fadeIn 1s ease;
        }
        .auth-box h2 { font-family: 'Cinzel', serif; color: var(--accent-gold); letter-spacing: 3px; margin-bottom: 30px; }

        input {
            width: 100%; padding: 15px; margin: 15px 0;
            background: #1c1f2a; border: 1px solid #2d313f;
            border-radius: 5px; color: white; outline: none;
            transition: 0.3s; text-align: center; font-family: 'Montserrat';
        }
        input:focus { border-color: var(--accent-gold); box-shadow: 0 0 10px rgba(197, 160, 89, 0.1); }

        .btn-gold {
            width: 100%; padding: 15px; background: var(--accent-gold);
            border: none; color: black; font-weight: 700; cursor: pointer;
            text-transform: uppercase; letter-spacing: 2px; transition: 0.4s;
            font-family: 'Cinzel', serif;
        }
        .btn-gold:hover { background: #dfb873; transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0,0,0,0.4); }

        /* DASHBOARD */
        #app-content { display: none; padding: 40px 20px; max-width: 1100px; margin: 0 auto; animation: fadeIn 0.8s ease; }
        
        .nav-bar {
            display: flex; justify-content: space-between; align-items: center;
            padding: 25px 40px; background: var(--panel-bg);
            border-radius: 15px; border-bottom: 2px solid var(--accent-gold);
            margin-bottom: 50px;
        }

        .category-header {
            font-family: 'Cinzel', serif; font-size: 1.6rem; color: var(--accent-gold);
            margin: 40px 0 20px 0; display: flex; align-items: center; gap: 15px;
        }
        .category-header::after { content: ""; flex: 1; height: 1px; background: rgba(197, 160, 89, 0.2); }

        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 30px; }

        .item-card {
            background: #161822; padding: 45px 25px; border-radius: 12px;
            text-align: center; border: 1px solid #242735;
            transition: 0.5s cubic-bezier(0.2, 1, 0.2, 1); cursor: pointer;
        }
        .item-card:hover {
            border-color: var(--accent-gold); background: #1c1f2d;
            transform: scale(1.03); box-shadow: 0 20px 40px rgba(0,0,0,0.5);
        }
        .item-card i { font-size: 2.8rem; color: var(--accent-gold); margin-bottom: 20px; display: block; opacity: 0.8; }
        .item-card h3 { font-family: 'Cinzel', serif; font-size: 1.1rem; margin: 0; letter-spacing: 1px; }
        .item-card p { font-size: 0.75rem; color: var(--text-dim); margin-top: 15px; text-transform: uppercase; letter-spacing: 1px; }

        /* MODAL */
        #modal-layer {
            display: none; position: fixed; inset: 0; z-index: 9999;
            background: var(--bg-deep); padding: 50px; overflow-y: auto;
        }
        .exit-btn {
            position: fixed; top: 30px; right: 30px; background: transparent;
            border: 1px solid var(--accent-gold); color: var(--accent-gold);
            padding: 10px 25px; cursor: pointer; font-family: 'Cinzel'; transition: 0.3s;
        }
        .exit-btn:hover { background: var(--accent-gold); color: black; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div class="ambient-light"></div>
    <audio id="bg-music" loop><source src="music.mp3" type="audio/mpeg"></audio>

    <div id="auth-screen">
        <div class="auth-box">
            <h2 style="margin:0;">VK PROJECT</h2>
            <p style="color: var(--text-dim); font-size: 0.75rem; margin-top: 10px; letter-spacing: 1px;">Special For GBL</p>
            <input type="text" id="user-in" placeholder="Username daxil edin" maxlength="12">
            <button class="btn-gold" onclick="login()">Giriş</button>
            <p id="auth-error" style="color:#ff3e3e; font-size:0.8rem; margin-top:15px; display:none;"></p>
        </div>
    </div>

    <div id="app-content">
        <div class="nav-bar">
            <div style="font-family:'Cinzel'; color:var(--accent-gold);"><i class="fas fa-crown"></i> <span id="u-name">...</span></div>
            <div style="display:flex; gap:30px; font-weight:600; font-size:0.9rem;">
                <span><i class="fas fa-gem" style="color:var(--accent-gold);"></i> <b id="u-pts">0</b></span>
                <span><i class="fas fa-circle" style="color:#22c55e; font-size:0.6rem;"></i> Active: <b id="on-count">0</b></span>
            </div>
            <div onclick="location.reload()" style="cursor:pointer;"><i class="fas fa-power-off"></i></div>
        </div>
        <div id="gallery-root"></div>
    </div>

    <div id="modal-layer">
        <button class="exit-btn" onclick="closeModal()"><i class="fas fa-xmark"></i> BAĞLA</button>
        <div id="modal-content" style="max-width:900px; margin: 40px auto 0 auto;"></div>
    </div>

    <script>
        const originalMusic = "music.mp3";
        const structure = {
            "main_tools": {
                name: "Özəl Alətlər",
                items: [
                    { n: "IP Tracker", f: "ip.html", i: "fas fa-crosshairs", p: 100 },
                    { n: "Anonim Mail", f: "mail.html", i: "fas fa-paper-plane", p: 0 },
                    { n: "WhatsApp Sürət", f: "wa.html", i: "fab fa-whatsapp", p: 700 },
                    { n: "Whois Search", f: "whois.html", i: "fas fa-search", p: 50 },
                    { n: "Kamera Sistemi", f: "trap.html", i: "fas fa-camera", p: 400 },
                    { n: "Sızıntı Yoxla", f: "leak.html", i: "fas fa-shield-halved", p: 300 },
                    { n: "Kripto Analiz", f: "crypto-track.html", i: "fas fa-arrow-trend-up", p: 0 }
                ]
            },
            "multiplayer_fun": {
                name: "İnteraktiv Oyunlar",
                items: [
                    { n: "Tarot Analizi", f: "tarot_elite.html", i: "fas fa-star-and-crescent", p: 150 },
                    { n: "Elite X-O", f: "tic_tac_toe.html", i: "fas fa-gamepad", p: 50 },
                    { n: "Binary Soul", f: "binary_soul.html", i: "fas fa-dna", p: 200 },
                    { n: "Sirr Şifrəsi", f: "love_password.html", i: "fas fa-lock", p: 80 },
                    { n: "Hissiyyat Testi", f: "binary_pulse.html", i: "fas fa-bolt", p: 120 },
                    { n: "Cyber Path", f: "cyber_path.html", i: "fas fa-map", p: 100 },
                    { n: "Daş-Kağız", f: "rps_game.html", i: "fas fa-hand", p: 30 },
                    { n: "Doğruluq/Cəsarət", f: "truth_or_dare.html", i: "fas fa-mask", p: 40 }
                ]
            }
        };

        const firebaseConfig = { 
            apiKey: "AIzaSyCM5WdZNSj9oFipNI-J3csHpOIvK8PjoLU", 
            databaseURL: "https://sevgili-testi-default-rtdb.firebaseio.com", 
            projectId: "sevgili-testi" 
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        async function login() {
            const user = document.getElementById('user-in').value.trim().toLowerCase();
            if(!user || user.length < 3) return;

            try {
                const snap = await db.ref('users/' + user).get();
                if(snap.exists()) {
                    let dev = localStorage.getItem('elite_key');
                    if(!dev) {
                        document.getElementById('auth-error').innerText = "Bu ad artıq tutulub!";
                        document.getElementById('auth-error').style.display = "block";
                        return;
                    }
                } else {
                    const k = Math.random().toString(36).substring(7);
                    localStorage.setItem('elite_key', k);
                    await db.ref('users/' + user).set({ points: 250, createdAt: Date.now() });
                }

                window.loginUser = user;
                document.getElementById('auth-screen').style.display = "none";
                document.getElementById('app-content').style.display = "block";
                document.getElementById('u-name').innerText = user.toUpperCase();
                document.getElementById('bg-music').play().catch(()=>{});

                db.ref('users/' + user + '/points').on('value', s => {
                    document.getElementById('u-pts').innerText = s.val() || 0;
                    window.currentPoints = s.val() || 0;
                });

                renderGallery();
                setInterval(()=> { document.getElementById('on-count').innerText = Math.floor(Math.random()*15)+5; }, 5000);
            } catch(e) { console.log(e); }
        }

        function renderGallery() {
            const root = document.getElementById('gallery-root');
            root.innerHTML = "";
            for(let key in structure) {
                const cat = structure[key];
                let group = `<div class="category-header">${cat.name}</div><div class="grid">`;
                cat.items.forEach(item => {
                    group += `
                    <div class="item-card" onclick="openItem('${item.f}', ${item.p}, '${key}')">
                        <i class="${item.i}"></i>
                        <h3>${item.n}</h3>
                        <p>${item.p} Xal</p>
                    </div>`;
                });
                root.innerHTML += group + `</div>`;
            }
        }

        async function openItem(file, pts, cat) {
            if(window.currentPoints < pts) return alert("Xalınız kifayət etmir.");
            if(cat === "multiplayer_fun") {
                const aud = document.getElementById('bg-music');
                aud.src = "fun.mp3"; aud.play();
            }
            try {
                const res = await fetch(file);
                document.getElementById('modal-content').innerHTML = await res.text();
                document.getElementById('modal-layer').style.display = "block";
                
                const sc = document.getElementById('modal-content').getElementsByTagName('script');
                for(let s of sc) {
                    const ns = document.createElement("script");
                    ns.text = s.text; document.body.appendChild(ns).parentNode.removeChild(ns);
                }
            } catch(e) { alert("Xəta!"); }
        }

        function closeModal() {
            document.getElementById('modal-layer').style.display = "none";
            const aud = document.getElementById('bg-music');
            if(!aud.src.includes(originalMusic)) { aud.src = originalMusic; aud.play(); }
        }
    </script>
</body>
</html>