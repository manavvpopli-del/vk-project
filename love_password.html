<div class="tool-container" style="color: white; text-align: center; font-family: 'Courier New', monospace;">
    <h3 style="color: #ff3e3e;"><i class="fas fa-lock"></i> PASSWORD OF LOVE</h3>
    
    <div id="setup-msg" class="glass" style="padding: 20px;">
        <p>Gizli mesajını və otaq kodunu təyin et:</p>
        <input type="text" id="pass-room" placeholder="Otaq Kodu">
        <input type="text" id="secret-msg" placeholder="Gizli Mesajın">
        <button class="btn" onclick="lockMessage()">MESAJI ŞİFRƏLƏ</button>
    </div>

    <div id="unlock-area" style="display:none; margin-top: 20px;">
        <p id="q-text" style="color: #ffcc00;"></p>
        <input type="text" id="ans-input" placeholder="Cavabın...">
        <button class="btn" onclick="checkAns()">KODU SINDIR</button>
    </div>

    <div id="final-secret" style="display:none; padding: 20px; border: 2px solid #25d366; border-radius: 15px;">
        <h4 style="color: #25d366;">ŞİFRƏ SINDIRILDI!</h4>
        <p id="decoded-msg" style="font-size: 1.2rem;"></p>
    </div>
</div>

<script>
    let currentStep = 0;
    const qs = ["Onun ən çox sevdiyi rəng?", "İlk tanış olduğunuz ay?", "Onun doğum ili?"];
    
    function lockMessage() {
        const room = document.getElementById('pass-room').value;
        const msg = document.getElementById('secret-msg').value;
        window.db.ref('games/passwords/' + room).set({ msg: msg, step: 0 });
        alert("Mesaj şifrələndi! Sevgilin bu otaq kodu ilə girib sualları tapmalıdır.");
    }

    function checkAns() {
        // Bu hissəni sadəlik üçün lokal yoxlayırıq, realda sualları da Firebase-ə qoya bilərsən
        currentStep++;
        if(currentStep >= 3) {
            document.getElementById('unlock-area').style.display = 'none';
            document.getElementById('final-secret').style.display = 'block';
            window.db.ref('games/passwords/' + room).once('value', s => {
                document.getElementById('decoded-msg').innerText = s.val().msg;
            });
        } else {
            document.getElementById('q-text').innerText = qs[currentStep];
        }
    }
</script>